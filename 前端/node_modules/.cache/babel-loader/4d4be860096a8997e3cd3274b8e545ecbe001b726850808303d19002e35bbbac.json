{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  // name: 'LoginBox',\n  data() {\n    var checkName = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error('用户名不能为空'));\n      }\n      setTimeout(() => {\n        if (value.length > 8) {\n          callback(new Error('用户名不能超过8个字符'));\n        } else {\n          callback();\n        }\n      }, 1000);\n    };\n    var validatePass = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('请输入密码'));\n      } else {\n        if (this.ruleForm.checkPass !== '') {\n          this.$refs.ruleForm.validateField('checkPass');\n        }\n        callback();\n      }\n    };\n    var validatePass2 = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('请再次输入密码'));\n      } else if (value !== this.ruleForm.pass) {\n        callback(new Error('两次输入密码不一致!'));\n      } else {\n        callback();\n      }\n    };\n    return {\n      showInfoDialog: false,\n      showInputDialog: false,\n      addFriendDialog: false,\n      isLogin: false,\n      isRegiste: true,\n      isChat: true,\n      isConnected: false,\n      acceptedStatus: {},\n      showboxlr: true,\n      showboxchat: false,\n      contactsdata: '',\n      // friend_id: res[0][i].friend_id,\n      // avatar: null,\n      // remark: res[0][i].remark,\n      // chat_id: res[0][i].chat_id,\n      // 聊天室id\n      chatsdata: '',\n      // chat_with_id: res[i].chat_with_id,\n      // remark: res[i].remark,\n      // chat_id: res[i].chat_id,\n      // last_msg_time: res[i].last_msg_time,\n      // last_msg: res[i].last_msg,\n      // 消息id\n      msgsdata: '',\n      receivemsgdata: '',\n      chatfriend: '',\n      msgtext: '',\n      loginForm: {\n        username: '',\n        password: ''\n      },\n      ruleForm: {\n        username: '',\n        pass: '',\n        checkPass: ''\n      },\n      rules: {\n        username: [{\n          validator: checkName,\n          trigger: 'blur'\n        }],\n        pass: [{\n          validator: validatePass,\n          trigger: 'blur'\n        }],\n        checkPass: [{\n          validator: validatePass2,\n          trigger: 'blur'\n        }]\n      },\n      // CCC 头像url\n      myAvatar: '',\n      msgAvatar: '',\n      msgOfChat: -1,\n      // CCC1 搜索输入\n      searchInput: '',\n      changeNickname: '',\n      Nickname: '',\n      // CCC2 好友申请消息\n      appmsgsdata: ''\n    };\n  },\n  // 在页面刷新前执行断开连接操作\n  beforeCreate() {\n    window.addEventListener('beforeunload', this.disconnect);\n  },\n  created() {\n    console.log(\"myLogin.vue is running!\");\n    if (!this.isConnected) {\n      // 打开 WebSocket 连接\n      this.$socket.open();\n      // 设置连接状态\n      this.isConnected = true;\n    }\n  },\n  mounted() {\n    console.log(\"mounted is running!\");\n    const dialog = document.querySelector('.el-dialog');\n    if (dialog) {\n      dialog.style.left = '-195px';\n    }\n  },\n  methods: {\n    disconnect() {\n      // 关闭WebSocket连接\n      this.$socket.close();\n      // 移除监听事件\n      window.removeEventListener('beforeunload', this.disconnect);\n    },\n    // CCC 返回好友的头像url\n    getImageUrl(base64Data) {\n      if (base64Data) return `data:image/jpeg;base64,${base64Data}`;else return \"src/images/avatar01.jpg\";\n    },\n    // CCC2 返回好友的最新消息信息\n    getLastMsgTime(friend) {\n      if (friend.last_msg_time) {\n        const now = new Date();\n        // const msg_time = new Date(friend.last_msg_time)\n        var msg_time = new Date(Date.parse(friend.last_msg_time));\n        // var utcTimestamp = Date.parse(friend.last_msg_time);\n        // msg_time = new Date(utcTimestamp);\n        // msg_time = msg_time.toLocaleString();\n        // alert(now, msg_time)\n        const day = now.getDay();\n        const hours = now.getHours();\n        const minutes = now.getMinutes();\n        if (msg_time.getFullYear() <= now.getFullYear() && msg_time.getMonth() <= now.getMonth() && msg_time.getDate() < now.getDate()) {\n          return `${msg_time.getFullYear()}-${msg_time.getMonth() + 1}-${msg_time.getDate()}`;\n        } else {\n          // msg_time = msg_time.toLocaleTimeString();\n          return `${msg_time.getHours()}:${msg_time.getSeconds()}`;\n        }\n      } else {\n        return;\n      }\n    },\n    getLastMsg(friend) {\n      var maxLength = 8;\n      if (friend.last_msg) {\n        if (friend.last_msg.length <= maxLength) {\n          return friend.last_msg;\n        } else {\n          return friend.last_msg.slice(0, maxLength) + '...';\n        }\n      } else {\n        return;\n      }\n    },\n    mountEvents() {\n      // alert(\"mount events\")\n      this.sockets.subscribe('returnContacts', data => {\n        this.contactsdata = data;\n        console.log(data[0]);\n      });\n      this.sockets.subscribe('returnAppMsgs', data => {\n        this.appmsgsdata = data;\n      });\n      this.sockets.subscribe('returnMsgs', data => {\n        this.msgsdata = data;\n      });\n\n      // CCC2   所有的接收消息的处理返回函数都需要在登录成功后注册\n      this.sockets.subscribe('receiveMessage', data => {\n        this.msgsdata.push(data[0]);\n        this.$socket.emit('requestContacts', user_id);\n      });\n\n      // 收到好友申请时\n      this.sockets.subscribe('receiveAppMsg', data => {\n        if (this.loginForm.username == data.sender_id) {\n          // alert('1')\n          console.log(\"cnm\");\n          // alert(\"申请消息发送成功!\")\n        } else {\n          // alert(data.sender_id, \"请求添加您为好友!\")\n        }\n        this.$socket.emit('requestAppMsgs', this.loginForm.username);\n      });\n\n      // 更新通讯录和申请消息列表\n      this.sockets.subscribe('update', () => {\n        // alert(\"update\")\n        this.$socket.emit('requestContacts', this.loginForm.username);\n        this.$socket.emit('requestAppMsgs', this.loginForm.username);\n      });\n    },\n    loginEvent() {\n      //   var password = this.loginForm.password\n      var data = {\n        id: this.loginForm.username,\n        password: this.loginForm.password\n      };\n      this.$socket.emit('login', data);\n      this.sockets.subscribe('checkoutAnswer', data => {\n        // console.log(data)\n        if (data.msg === \"用户密码正确\") {\n          // alert(\"欢迎登录！\")\n          this.showboxchat = true;\n          this.showboxlr = false;\n          this.isChat = true;\n          var user_id = this.loginForm.username;\n          console.log(data);\n          //CCC 登录时取得头像数据\n          this.myAvatar = data.avatar;\n          this.Nickname = data.nickname;\n          // 定义消息接收处理函数\n          this.mountEvents();\n          this.$socket.emit('requestContacts', user_id);\n          this.$socket.emit('requestAppMsgs', this.loginForm.username);\n          // this.$socket.emit('requestChats', (user_id))\n          // this.sockets.subscribe('returnChats',data => {\n          //   this.chatsdata = data\n          //   // console.log(data)\n          // })\n\n          // console.log(this.chatsdata)\n          // this.chatsdata.chat_id\n          // console.log(chatid)\n        } else {\n          alert(\"用户名或密码错误\");\n        }\n      });\n    },\n    //     receiveallmsg(){\n    //       var chat_id = this.chatsdata[0].chat_id\n    //       console.log(chat_id)\n    //       this.$socket.emit('requestMsgs', (chat_id))\n    //       this.sockets.subscribe('returnMsgs',data => {\n    //         this.msgsdata = data\n    // })\n    // },\n\n    changeNick() {\n      var user_id = this.loginForm.username;\n      console.log(user_id);\n      var new_nickname = this.changeNickname;\n      console.log(new_nickname);\n      this.$socket.emit('changeNickname', user_id, new_nickname);\n      this.Nickname = new_nickname;\n      this.showInputDialog = false;\n    },\n    getClass(msg) {\n      var user_id = this.loginForm.username;\n\n      // console.log(msg.message_id)\n      if (msg.sender_id === user_id) {\n        console.log('right');\n        return 'right';\n      } else {\n        console.log('left');\n        return 'left';\n      }\n    },\n    receivemsg(friend) {\n      this.msgOfChat = friend.chat_id;\n      this.chatfriend = friend;\n      var chat_id = this.chatfriend.chat_id;\n      console.log(chat_id);\n      // CCC 定义显示的头像\n      this.msgAvatar = this.chatfriend.avatar;\n      this.$socket.emit('requestMsgs', chat_id);\n      this.sockets.subscribe('returnMsgs', data => {\n        this.msgsdata = data;\n      });\n    },\n    // 发消息并更新消息列表\n    sendMsg() {\n      if (this.msgOfChat != -1) {\n        var msgdata = {\n          chat_id: this.chatfriend.chat_id,\n          sender_id: this.loginForm.username,\n          receiver_id: this.chatfriend.friend_id,\n          send_time: new Date().toISOString().slice(0, 19).replace('T', ' '),\n          message_content: this.msgtext\n        };\n        this.$socket.emit('sendMessage', msgdata);\n        var chat_id = this.chatfriend.chat_id;\n        console.log(chat_id);\n        this.$socket.emit('requestMsgs', chat_id);\n        this.msgtext = '';\n      } else {\n        alert(\"请先选择一个聊天！\");\n      }\n    },\n    // 注册\n    submitForm(formName) {\n      //   var id = this.ruleForm.username\n      //   var password = this.ruleForm.pass\n\n      var data = {\n        id: this.ruleForm.username,\n        password: this.ruleForm.pass\n      };\n      var checkpass = this.ruleForm.checkPass;\n      if (checkpass === data.password) {\n        this.$socket.emit('signup', data);\n        this.sockets.subscribe('signupFail', msg => {\n          alert('注册信息不正确');\n        });\n        // 登陆成功\n        this.sockets.subscribe('signupSuccess', msg => {\n          alert('请登录');\n        });\n      } else {\n        alert('注册信息不正确');\n      }\n    },\n    handleClose(done) {\n      this.$confirm('确认关闭？').then(_ => {\n        done();\n      }).catch(_ => {});\n    },\n    deleteEvent() {\n      var user_id = this.loginForm.username;\n      this.$socket.emit('cancelAccount', user_id);\n      this.sockets.subscribe('cancelAccountSuccess', () => {\n        alert(\"注销成功\");\n        // 缺：用户注销后跳转界面\n        this.showboxchat = false;\n        this.showboxlr = true;\n      });\n    },\n    requestContactsEvent() {\n      var user_id = this.loginForm.username;\n      this.$socket.emit('requestContacts', user_id);\n      this.sockets.subscribe('returnContacts', data => {});\n    },\n    // resetForm(formName) {\n    //   this.$refs[formName].resetFields();\n    // },\n\n    // 打开文件选择器\n    openFilePicker() {\n      this.$refs.fileInput.click();\n    },\n    // 修改头像\n    changeAvatarRequest(event) {\n      const file = event.target.files[0];\n      if (!file) {\n        // alert(\"!file\");\n        return;\n      }\n      var user_id = this.loginForm.username;\n      const reader = new FileReader();\n      reader.onload = () => {\n        const imageData = reader.result.split(',')[1]; // 去除前缀信息\n        this.$socket.emit('changeAvatarRequest', user_id, imageData);\n      };\n      reader.readAsDataURL(file);\n      // // 图片压缩\n      // compressImage(file, maxWidth, maxHeight, quality, function(compressedDataURL) {\n      //   // 在这里可以使用压缩后的DataURL，例如显示在<img>元素中\n      //   const imgElement = document.getElementById('compressedImg');\n      //   imgElement.src = compressedDataURL;\n\n      //   var user_id = this.loginForm.username\n      //   const reader = new FileReader();\n      //   reader.onload = () => {\n      //     const imageData = reader.result.split(',')[1]; // 去除前缀信息\n      //     this.$socket.emit('changeAvatarRequest', user_id, imageData);\n      //   };\n      //   reader.readAsDataURL(file);\n      // });\n      // alert(\"get it\");\n\n      // this.$socket.emit('changeAvatarRequest', user_id, file);\n\n      // 处理返回事件\n      this.sockets.subscribe('changeAvatar', newAvatar => {\n        this.myAvatar = newAvatar;\n      });\n    },\n    // 压缩图片函数\n    compressImage(file, maxWidth, maxHeight, quality, callback) {\n      const reader = new FileReader();\n      reader.onload = function (event) {\n        const img = new Image();\n        img.src = event.target.result;\n        img.onload = function () {\n          const canvas = document.createElement('canvas');\n          let width = img.width;\n          let height = img.height;\n\n          // 计算压缩后的宽度和高度\n          if (width > maxWidth) {\n            height *= maxWidth / width;\n            width = maxWidth;\n          }\n          if (height > maxHeight) {\n            width *= maxHeight / height;\n            height = maxHeight;\n          }\n          canvas.width = width;\n          canvas.height = height;\n          const ctx = canvas.getContext('2d');\n\n          // 在canvas上绘制压缩后的图片\n          ctx.drawImage(img, 0, 0, width, height);\n\n          // 将canvas上的图片转为压缩后的DataURL\n          const compressedDataURL = canvas.toDataURL('image/jpeg', quality / 100);\n\n          // 调用回调函数传递压缩后的DataURL\n          callback(compressedDataURL);\n        };\n      };\n      reader.readAsDataURL(file);\n    },\n    // CCC1 添加好友\n    addFriend() {\n      // alert('add')\n      this.$socket.emit('addFriend', {\n        user_id: this.loginForm.username,\n        friend_id: this.searchInput\n      });\n      this.sockets.subscribe('addFriendFail', () => {\n        alert(\"用户不存在！\");\n      });\n      this.sockets.subscribe('addFriendSuccess', (contact, pci) => {\n        this.$socket.emit('requestContacts', this.loginForm.username);\n      });\n      this.searchInput = '';\n    },\n    // CCC2 申请好友\n    applyFriend() {\n      if (this.searchInput == this.loginForm.username) {\n        console.log(\"不能添加自己\");\n        return;\n      }\n      this.$socket.emit('sendAppMsg', {\n        sender_id: this.loginForm.username,\n        receiver_id: this.searchInput,\n        send_time: new Date().toISOString().slice(0, 19).replace('T', ' '),\n        application_state: 0\n      });\n      this.sockets.subscribe('applyFriendFail', () => {\n        alert(\"用户不存在！\");\n      });\n      this.searchInput = '';\n    },\n    // 获取申请消息另一方的用户id\n    getApplyUser(appmsg) {\n      if (appmsg.sender_id == this.loginForm.username) return appmsg.receiver_id;else return appmsg.sender_id;\n    },\n    getApplyTime(appmsg) {\n      var msg_time = new Date(Date.parse(appmsg.send_time));\n      return `${msg_time.getFullYear()}-${msg_time.getMonth() + 1}-${msg_time.getDate()}`;\n    },\n    getApplyState(appmsg) {\n      if (appmsg.application_state == 0) return \"待处理\";else {\n        if (appmsg.application_state == -1) return \"已拒绝\";else return \"已通过\";\n      }\n    },\n    appAccept(appmsg) {\n      this.$socket.emit('appAccept', appmsg.message_id, this.loginForm.username, this.getApplyUser(appmsg));\n      // this.$set(this.acceptedStatus, appmsg.message_id, newstatus);\n    },\n\n    appReject(appmsg) {\n      this.$socket.emit('appReject', appmsg.message_id, this.loginForm.username, this.getApplyUser(appmsg));\n      // this.$set(this.acceptedStatus, appmsg.message_id, newstatus);\n    },\n\n    // CCC1 删除好友\n    deleteFriend(friend) {\n      event.preventDefault();\n      const confirmed = confirm('确认删除该好友吗?这将清除所有的聊天记录！');\n      if (confirmed) {\n        // 执行删除操作\n        this.chatfriend = friend;\n        this.$socket.emit('deleteFriend', friend.chat_id, this.loginForm.username, friend.friend_id);\n        this.sockets.subscribe('deleteFriendSuccess', () => {\n          // alert(\"删除成功！\");\n          this.$socket.emit('requestContacts', this.loginForm.username);\n        });\n      } else {\n        // 用户点击取消，不执行删除操作\n      }\n    }\n  }\n};","map":{"version":3,"names":["data","checkName","rule","value","callback","Error","setTimeout","length","validatePass","ruleForm","checkPass","$refs","validateField","validatePass2","pass","showInfoDialog","showInputDialog","addFriendDialog","isLogin","isRegiste","isChat","isConnected","acceptedStatus","showboxlr","showboxchat","contactsdata","chatsdata","msgsdata","receivemsgdata","chatfriend","msgtext","loginForm","username","password","rules","validator","trigger","myAvatar","msgAvatar","msgOfChat","searchInput","changeNickname","Nickname","appmsgsdata","beforeCreate","window","addEventListener","disconnect","created","console","log","$socket","open","mounted","dialog","document","querySelector","style","left","methods","close","removeEventListener","getImageUrl","base64Data","getLastMsgTime","friend","last_msg_time","now","Date","msg_time","parse","day","getDay","hours","getHours","minutes","getMinutes","getFullYear","getMonth","getDate","getSeconds","getLastMsg","maxLength","last_msg","slice","mountEvents","sockets","subscribe","push","emit","user_id","sender_id","loginEvent","id","msg","avatar","nickname","alert","changeNick","new_nickname","getClass","receivemsg","chat_id","sendMsg","msgdata","receiver_id","friend_id","send_time","toISOString","replace","message_content","submitForm","formName","checkpass","handleClose","done","$confirm","then","_","catch","deleteEvent","requestContactsEvent","openFilePicker","fileInput","click","changeAvatarRequest","event","file","target","files","reader","FileReader","onload","imageData","result","split","readAsDataURL","newAvatar","compressImage","maxWidth","maxHeight","quality","img","Image","src","canvas","createElement","width","height","ctx","getContext","drawImage","compressedDataURL","toDataURL","addFriend","contact","pci","applyFriend","application_state","getApplyUser","appmsg","getApplyTime","getApplyState","appAccept","message_id","appReject","deleteFriend","preventDefault","confirmed","confirm"],"sources":["src/App.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <transition name=\"fade\">\r\n      <div class=\"main-box\" v-show=\"showboxlr\">\r\n        <div :class=\"['container', 'container-login', { 'is-txl is-z200': isLogin }, {'is-hidden': isRegiste}]\">\r\n          <form>\r\n            <h2 class=\"title\">登录聊天室</h2>\r\n            <span class=\"text\">使用您的用户名和密码</span>\r\n            <input class=\"form__input\" @keyup.enter=\"loginEvent\" v-model=\"loginForm.username\" type=\"text\" placeholder=\"用户名\" />\r\n            <input class=\"form__input\" @keyup.enter=\"loginEvent\" v-model=\"loginForm.password\" type=\"password\" placeholder=\"密码\" />\r\n            <div class=\"primary-btn\" @click=\"loginEvent\">立即登录</div>\r\n          </form>\r\n        </div>\r\n        <div :class=\"['container', 'container-register', { 'is-txl': isLogin }, {'is-hidden': isLogin}]\">\r\n          <form :model=\"ruleForm\" status-icon :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\">\r\n            <h2 class=\"title\">创建您的账户</h2>\r\n            <span class=\"text\">运用用户名和密码</span>\r\n            <input class=\"form__input\" v-model=\"ruleForm.username\" type=\"text\" placeholder=\"用户名\" />\r\n            <input class=\"form__input\" v-model=\"ruleForm.pass\" type=\"text\" placeholder=\"密码\" />\r\n            <input class=\"form__input\" v-model=\"ruleForm.checkPass\" type=\"password\" placeholder=\"确认密码\" />\r\n            <div class=\"primary-btn\" @click=\"submitForm\">立即注册</div>\r\n          </form>\r\n        </div>\r\n        <div :class=\"['switch', { login: isLogin }]\" v-show=\"showboxlr\">\r\n          <div class=\"switch__circle\"></div>\r\n          <div class=\"switch__circle switch__circle_top\"></div>\r\n          <div class=\"switch__container\">\r\n            <h2>{{ isRegiste ? '你好，欢迎使用 !' : '欢迎回来 !' }}</h2>\r\n            <p>\r\n              {{\r\n                isRegiste\r\n                  ? '使用您的个人信息以创建您的个人聊天账户'\r\n                  : '每天聊一聊，生活更美妙'\r\n              }}\r\n            </p>\r\n            <div class=\"primary-btn\" @click=\"isLogin = !isLogin,isRegiste=!isRegiste\">\r\n              {{ isLogin ? '立即注册' : '立即登录' }}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </transition>\r\n    <transition name=\"fade\">\r\n      <div class=\"container\"  v-show=\"showboxchat\">\r\n        <div class=\"box verboxleft\">\r\n          <div class=\"avatar-container\">\r\n            <!-- CCC 个人头像 -->\r\n            <img :src=\"getImageUrl(myAvatar)\" alt=\"Avatar\" class=\"avatar\" @click=\"showInfoDialog = true\">\r\n            <el-dialog :visible.sync=\"showInfoDialog\" width=\"20%\" :top=\"'55px'\" :before-close=\"handleClose\" custom-class=\"userinfo-dialog\">\r\n              <div class=\"image-text\">  \r\n                <!-- CCC 个人信息小框 -->\r\n\r\n                <div>\r\n                  <!-- 头像 -->\r\n                  <input type=\"file\" accept=\"image/jpeg\" ref=\"fileInput\" class=\"image-dialog\" @change=\"changeAvatarRequest\" style=\"display: none\" />\r\n                  <img :src=\"getImageUrl(myAvatar)\" alt=\"Avatar\" class=\"image-dialog\" @click=\"openFilePicker\" style=\"cursor: pointer\" />\r\n                  <!-- <img src=\"./images/avatar02.jpg\" alt=\"tupian\" class=\"image-dialog\" @click=\"changeAvatarEvent\"> -->\r\n                </div>\r\n     \r\n                <div class=\"text-dialog\" style=\"font-size:20px;\">\r\n                  {{ (Nickname !== null) ? Nickname : \"默认用户昵称\" }}\r\n                  <!-- <button class=\"btn0\" style=\"margin-right: 10px;border-radius: 4px; border:none; padding:5px 40px; background-color: #25c672; color: #ffffff;font-size: 20px;\" @click=\"receiveallmsg\">收消息</button> -->\r\n                  <button class=\"btn0 btn-dialog\" type=\"text\" style=\"font-size: 10px; border-radius: 4px;\" @click=\"showInputDialog = true\">修改昵称</button>\r\n                  <el-dialog :visible.sync=\"showInputDialog\" width=\"20%\" :top=\"'55px'\" :before-close=\"handleClose\" custom-class=\"userinfo-dialog\">\r\n                    <div class=\"image-input\"> \r\n                      <input type=\"text\" v-model=\"changeNickname\" class=\"search-input\" placeholder=\"输入昵称\"> \r\n                      <el-button @click=\"changeNick\">提交</el-button>\r\n                    </div>\r\n                    <!-- <span slot=\"footer\" class=\"dialog-footer\">\r\n                    <el-button @click=\"showInputDialog = false\">取 消</el-button>\r\n                    <el-button type=\"primary\" @click=\"showInputDialog = false\">确 定</el-button>\r\n                    </span> -->\r\n                  </el-dialog>\r\n                </div>\r\n                  <div class=\"text-dialog\">{{ loginForm.username }}</div>\r\n                  <div style=\"clear: both;\"></div>\r\n                </div>\r\n                <div class=\"btn-dialog\">\r\n                  <!-- <button class=\"btn0\" style=\"margin-right: 10px;border-radius: 4px; border:none; padding:5px 40px; background-color: #25c672; color: #ffffff;font-size: 20px;\" @click=\"receiveallmsg\">收消息</button> -->\r\n                  <el-button class=\"btn0\" type=\"text\" icon=\"el-icon-delete\" style=\"font-size: 20px;\" @click=\"deleteEvent\"></el-button>\r\n                </div>\r\n                <span slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"showInfoDialog = false\">取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"showInfoDialog = false\">确 定</el-button>\r\n              </span>\r\n            </el-dialog>\r\n          </div>\r\n          <!-- <div class=\"btn-container\">\r\n            <el-button class=\"btn\" type=\"text\" icon=\"el-icon-chat-round\" style=\"width:0px;height: 0px; font-size: 0px; color: #25c672;\"></el-button>\r\n            <el-button class=\"btn\" type=\"text\" icon=\"el-icon-chat-round\" style=\"font-size: 30px; color: #25c672;\"></el-button>\r\n            <el-button class=\"btn\" type=\"text\" icon=\"el-icon-user\" style=\"font-size: 30px; color: #25c672;\"></el-button>\r\n            <el-button class=\"btn\" type=\"text\" icon=\"el-icon-setting\" style=\"font-size: 30px; color: #25c672;\"></el-button>\r\n          </div> -->\r\n        </div>\r\n        <div class=\"box verboxmid\">\r\n          <div class=\"verboxmidtop\">\r\n            <!-- CCC1 搜索好友 -->\r\n            <input type=\"text\" v-model=\"searchInput\" class=\"search-input\" @keyup.enter=\"applyFriend\" placeholder=\"搜索\">\r\n            <i class=\"el-icon-circle-plus-outline\" style=\"margin-top: 10px; margin-right: 3px;\" @click=\"applyFriend\"></i>\r\n            <i class=\"el-icon-user\" style=\"margin-top: 10px; margin-right: 5px;\" @click=\"addFriendDialog = true\"></i>\r\n              <el-dialog :visible.sync=\"addFriendDialog\" width=\"20%\" :top=\"'55px'\" :before-close=\"handleClose\" custom-class=\"userinfo-dialog\">\r\n                <div style=\"height: 350px; overflow: auto;\">\r\n                  <div v-for=\"appmsg in appmsgsdata\" :key=\"appmsg.message_id\" style=\"display: flex; align-items: center; flex-wrap: wrap; line-height: 30px;\">\r\n                    <!-- 有可能接受方是自己，在这里还是显示另一方的名字 -->\r\n                      <span>\r\n                        {{ getApplyUser(appmsg) }}\r\n                        {{ getApplyTime(appmsg) }}\r\n                        <!-- 这里的application_state仅用于调试，做前端时需根据状态调整界面显示 -->\r\n                        {{ getApplyState(appmsg) }}\r\n                      </span>\r\n                    <!-- 这里需要处理，当appmsg == 0时，表示该消息没有被处理，显示操作按钮，当appmsg为1时，表示已同意，为-1时，表示已拒绝 -->\r\n                    <div v-if=\"appmsg.application_state === 0 && appmsg.sender_id !== loginForm.username\" style=\"width: 100%;\">\r\n                        <button class=\"btn3\" style=\"color: #25c672;font-size: 16px;\" @click=\"appAccept(appmsg)\">接受</button>\r\n                        <button class=\"btn3\" style=\"color: #c6254b;font-size: 16px;\" @click=\"appReject(appmsg)\">拒绝</button>\r\n                      </div>\r\n                      <div v-else-if=\"appmsg.application_state === 1\" style=\"width: 100%;\">已接受</div>\r\n                      <div v-else-if=\"appmsg.application_state === -1\" style=\"width: 100%;\">已拒绝</div>\r\n                    <!-- <div v-if=\"!acceptedStatus[appmsg.message_id]\" style=\"width: 100%;\">\r\n                        <button class=\"btn3\" style=\"color: #25c672;font-size: 16px;\" @click=\"appAccept(appmsg,'已接受')\">接受</button>\r\n                        <button class=\"btn3\" style=\"color: #c6254b;font-size: 16px;\" @click=\"appReject(appmsg,'已拒绝')\">拒绝</button>\r\n                      </div>\r\n                      <div v-else-if=\"acceptedStatus[appmsg.message_id] === '已接受'\" style=\"width: 100%;\">已接受</div>\r\n                      <div v-else-if=\"acceptedStatus[appmsg.message_id] === '已拒绝'\" style=\"width: 100%;\">已拒绝</div> -->\r\n                    <div v-if=\"index !== appmsgsdata.length - 1\" class=\"divider\"></div>\r\n                  </div>\r\n                </div>\r\n                <span slot=\"footer\" class=\"dialog-footer\">\r\n                  <el-button @click=\"addFriendDialog = false\">取 消</el-button>\r\n                  <el-button type=\"primary\" @click=\"addFriendDialog = false\">确 定</el-button>\r\n                </span>\r\n              </el-dialog>\r\n          </div>\r\n          <div class=\"verboxmidbottom\">\r\n            <div class=\"scroll-content\">\r\n              <!-- CCC 在好友列表中显示头像 -->\r\n              <!-- CCC1 删除好友 -->\r\n              <div v-for=\"friend in contactsdata\" :key=\"friend.friend_id\" style=\"display: flex; align-items: center; line-height: 30px;\" @click=\"receivemsg(friend)\" @contextmenu.prevent=\"deleteFriend(friend)\">\r\n                <img :src=\"getImageUrl(friend.avatar)\" alt=\"Avatar\" style=\"display:inline-block; vertical-align: middle; margin-top: 8px; margin-left:8px; margin-right: 8px; margin-bottom: 0px; width: 50px; height: 50px;\"/>\r\n                <div style=\"flex-grow: 1;\">\r\n                  <span style=\"display: inline-block; margin-top: 20px; font-size: 20px;\">{{ friend.friend_id }}</span>\r\n                  <span style=\"float: right; margin-top: 20px; margin-right: 2px; font-size: 8px;\">{{ getLastMsgTime(friend) }}</span>\r\n                  <div style=\"color:#8b8a89; margin-bottom: 10px; margin-left: 0px; font-size: 12px;\">{{ getLastMsg(friend) }}</div>\r\n                  <div v-if=\"index !== contactsdata.length - 1\" class=\"divider\"></div>\r\n                </div>\r\n                \r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"box verboxright\">\r\n          <div v-if=\"msgOfChat!==-1\" class=\"verboxrighttop\" style=\"font-size: 20px;\">\r\n            {{ chatfriend.friend_id }}\r\n          </div>\r\n          <div class=\"verboxrightmid\">\r\n            <div v-if=\"chatfriend\" class=\"scroll-content\">\r\n              <div class=\"msg-container\">\r\n              <div v-for=\"msg in msgsdata\" :key=\"msg.message_content\" :class=\"getClass(msg)\">\r\n                <div v-if=\"getClass(msg) === 'left'\" class=\"message-left\">\r\n                  <img :src=\"getImageUrl(msgAvatar)\" alt=\"friendimage\" style=\"width: 30px; height: 30px;\">\r\n                </div>\r\n                {{ msg.message_content }}\r\n                <div v-if=\"getClass(msg) === 'right'\" class=\"message-right\">\r\n                  <img :src=\"getImageUrl(myAvatar)\" alt=\"myimage\" style=\"width: 30px; height: 30px;\">\r\n                </div>\r\n                <!-- <div v-if=\"index !== contactsdata.length - 1\" class=\"divider\"></div> -->\r\n              </div>\r\n            </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"verboxrightbottom\">\r\n            <div class=\"btn-group\">\r\n              <!-- <el-button class=\"btn2\" type=\"text\" icon=\"el-icon-orange\" style=\"font-size: 25px; color: #25c672;\"></el-button>\r\n              <el-button class=\"btn2\" type=\"text\" icon=\"el-icon-folder-opened\" style=\"font-size: 25px; color: #25c672;\"></el-button>\r\n              <el-button class=\"btn2\" type=\"text\" icon=\"el-icon-picture-outline\" style=\"font-size: 25px; color: #25c672;\"></el-button>\r\n              <el-button class=\"btn2\" type=\"text\" icon=\"el-icon-mic\" style=\"font-size: 25px; color: #25c672;\"></el-button> -->\r\n            </div>\r\n            <input type=\"text\" v-model=\"msgtext\" @keyup.enter=\"sendMsg\" class=\"text-input\">\r\n            <div class=\"send-btn\">\r\n              <button class=\"btn3\" style=\"color: #25c672;font-size: 16px;\" @click=\"sendMsg\">发送(Enter)</button>\r\n            </div>\r\n          </div>  \r\n        </div>\r\n      </div>\r\n    </transition>\r\n  </div>\r\n</template>\r\n  \r\n  <script>\r\n  export default {\r\n\r\n    // name: 'LoginBox',\r\n    data() {\r\n      var checkName = (rule, value, callback) => {\r\n          if (!value) {\r\n            return callback(new Error('用户名不能为空'));\r\n          }\r\n          setTimeout(() => {\r\n            if (value.length > 8) {\r\n              callback(new Error('用户名不能超过8个字符'));\r\n            } \r\n            else{callback();}\r\n          }, 1000);\r\n        };\r\n  \r\n      var validatePass = (rule, value, callback) => {\r\n        if (value === '') {\r\n            callback(new Error('请输入密码'));\r\n          } else {\r\n            if (this.ruleForm.checkPass !== '') {\r\n              this.$refs.ruleForm.validateField('checkPass');\r\n            }\r\n            callback();\r\n          }\r\n        };\r\n  \r\n      var validatePass2 = (rule, value, callback) => {\r\n          if (value === '') {\r\n            callback(new Error('请再次输入密码'));\r\n          } else if (value !== this.ruleForm.pass) {\r\n            callback(new Error('两次输入密码不一致!'));\r\n          } else {\r\n            callback();\r\n          }\r\n        };\r\n      return {\r\n        showInfoDialog: false,\r\n        showInputDialog: false,\r\n        addFriendDialog: false,\r\n\r\n        isLogin: false,\r\n        isRegiste: true,\r\n        isChat: true,\r\n        isConnected: false,\r\n        acceptedStatus: {},\r\n\r\n        showboxlr: true,\r\n        showboxchat: false,\r\n\r\n        contactsdata: '',\r\n        // friend_id: res[0][i].friend_id,\r\n        // avatar: null,\r\n        // remark: res[0][i].remark,\r\n        // chat_id: res[0][i].chat_id,\r\n        // 聊天室id\r\n        chatsdata: '',\r\n        // chat_with_id: res[i].chat_with_id,\r\n        // remark: res[i].remark,\r\n        // chat_id: res[i].chat_id,\r\n        // last_msg_time: res[i].last_msg_time,\r\n        // last_msg: res[i].last_msg,\r\n        // 消息id\r\n        msgsdata:'',\r\n        receivemsgdata:'',\r\n        chatfriend: '',\r\n        msgtext: '',\r\n\r\n        loginForm: {\r\n          username: '',\r\n          password: '',\r\n        },\r\n        ruleForm: {\r\n          username: '',\r\n          pass: '',\r\n          checkPass: '',\r\n        },\r\n        rules: {\r\n            username: [\r\n              { validator: checkName, trigger: 'blur' }\r\n            ],\r\n            pass: [\r\n              { validator: validatePass, trigger: 'blur' }\r\n            ],\r\n            checkPass: [\r\n              { validator: validatePass2, trigger: 'blur' }\r\n            ]\r\n          },\r\n        // CCC 头像url\r\n        myAvatar: '',\r\n        msgAvatar: '',\r\n        msgOfChat: -1,\r\n        // CCC1 搜索输入\r\n        searchInput: '',\r\n        changeNickname: '',\r\n        Nickname: '',\r\n        // CCC2 好友申请消息\r\n        appmsgsdata:'',\r\n      };\r\n    },\r\n\r\n  // 在页面刷新前执行断开连接操作\r\n  beforeCreate() {\r\n    window.addEventListener('beforeunload', this.disconnect); \r\n  },\r\n\r\n  created() {\r\n    console.log(\"myLogin.vue is running!\")\r\n    if (!this.isConnected) {\r\n      // 打开 WebSocket 连接\r\n      this.$socket.open();\r\n      // 设置连接状态\r\n      this.isConnected = true; \r\n      \r\n    }\r\n\r\n  },\r\n\r\n  mounted(){\r\n    console.log(\"mounted is running!\")\r\n\r\n    const dialog = document.querySelector('.el-dialog');\r\n\r\n    if (dialog) {\r\n        dialog.style.left = '-195px';\r\n      }\r\n  },\r\n\r\n    methods: {\r\n      disconnect() {\r\n      // 关闭WebSocket连接\r\n      this.$socket.close(); \r\n      // 移除监听事件\r\n      window.removeEventListener('beforeunload', this.disconnect); \r\n    },\r\n\r\n    // CCC 返回好友的头像url\r\n    getImageUrl(base64Data) {\r\n      if(base64Data)\r\n        return `data:image/jpeg;base64,${base64Data}`;\r\n      else\r\n        return \"src/images/avatar01.jpg\";\r\n\r\n    },\r\n\r\n    // CCC2 返回好友的最新消息信息\r\n    getLastMsgTime(friend){\r\n      if(friend.last_msg_time){\r\n        const now = new Date();\r\n        // const msg_time = new Date(friend.last_msg_time)\r\n        var msg_time = new Date(Date.parse(friend.last_msg_time))\r\n        // var utcTimestamp = Date.parse(friend.last_msg_time);\r\n        // msg_time = new Date(utcTimestamp);\r\n        // msg_time = msg_time.toLocaleString();\r\n        // alert(now, msg_time)\r\n        const day = now.getDay();\r\n        const hours = now.getHours();\r\n        const minutes = now.getMinutes();\r\n        if (msg_time.getFullYear() <= now.getFullYear()\r\n          && msg_time.getMonth() <= now.getMonth()\r\n          && msg_time.getDate() < now.getDate()){\r\n          return `${msg_time.getFullYear()}-${msg_time.getMonth()+1}-${msg_time.getDate()}`\r\n        }\r\n        else {\r\n          // msg_time = msg_time.toLocaleTimeString();\r\n          return `${msg_time.getHours()}:${msg_time.getSeconds()}`\r\n        }\r\n      }\r\n      else{\r\n        return;\r\n      }\r\n    },\r\n\r\n    getLastMsg(friend){\r\n      var maxLength = 8;\r\n      if(friend.last_msg){\r\n        if (friend.last_msg.length <= maxLength) {\r\n          return friend.last_msg;\r\n        } else {\r\n          return friend.last_msg.slice(0, maxLength) + '...';\r\n        }\r\n      }\r\n      else{\r\n        return;\r\n      }\r\n    },\r\n\r\n    mountEvents(){\r\n      // alert(\"mount events\")\r\n      this.sockets.subscribe('returnContacts',data => {\r\n        this.contactsdata = data\r\n        console.log(data[0])\r\n      })\r\n\r\n      this.sockets.subscribe('returnAppMsgs',data => {\r\n          this.appmsgsdata = data\r\n      })\r\n\r\n      this.sockets.subscribe('returnMsgs',data => {\r\n          this.msgsdata = data\r\n      })\r\n\r\n      // CCC2   所有的接收消息的处理返回函数都需要在登录成功后注册\r\n      this.sockets.subscribe('receiveMessage',data => {\r\n          this.msgsdata.push(data[0])\r\n          this.$socket.emit('requestContacts', (user_id))\r\n      })\r\n\r\n      // 收到好友申请时\r\n      this.sockets.subscribe('receiveAppMsg',data => {\r\n          if(this.loginForm.username == data.sender_id){\r\n            // alert('1')\r\n            console.log(\"cnm\")\r\n            // alert(\"申请消息发送成功!\")\r\n          }\r\n          else {\r\n            // alert(data.sender_id, \"请求添加您为好友!\")\r\n          }\r\n          this.$socket.emit('requestAppMsgs', this.loginForm.username)\r\n      })\r\n\r\n      // 更新通讯录和申请消息列表\r\n      this.sockets.subscribe('update',() => {\r\n        // alert(\"update\")\r\n        this.$socket.emit('requestContacts', this.loginForm.username)\r\n        this.$socket.emit('requestAppMsgs', this.loginForm.username)\r\n      })\r\n    },\r\n\r\n    loginEvent () {\r\n    //   var password = this.loginForm.password\r\n      var data = {\r\n        id: this.loginForm.username,\r\n        password: this.loginForm.password\r\n      }\r\n      \r\n      this.$socket.emit('login', data)\r\n\r\n      this.sockets.subscribe('checkoutAnswer', data => {\r\n        // console.log(data)\r\n        if(data.msg===\"用户密码正确\"){\r\n            // alert(\"欢迎登录！\")\r\n            this.showboxchat = true\r\n            this.showboxlr = false\r\n            this.isChat = true\r\n            var user_id = this.loginForm.username\r\n            console.log(data)\r\n            //CCC 登录时取得头像数据\r\n            this.myAvatar = data.avatar\r\n            this.Nickname = data.nickname\r\n            // 定义消息接收处理函数\r\n            this.mountEvents()\r\n\r\n            this.$socket.emit('requestContacts', (user_id))\r\n            this.$socket.emit('requestAppMsgs', this.loginForm.username)\r\n              // this.$socket.emit('requestChats', (user_id))\r\n              // this.sockets.subscribe('returnChats',data => {\r\n              //   this.chatsdata = data\r\n              //   // console.log(data)\r\n              // })\r\n            \r\n            // console.log(this.chatsdata)\r\n            // this.chatsdata.chat_id\r\n            // console.log(chatid)\r\n        }\r\n        else{\r\n          alert(\"用户名或密码错误\")\r\n        }\r\n      })\r\n    },\r\n\r\n//     receiveallmsg(){\r\n//       var chat_id = this.chatsdata[0].chat_id\r\n//       console.log(chat_id)\r\n//       this.$socket.emit('requestMsgs', (chat_id))\r\n//       this.sockets.subscribe('returnMsgs',data => {\r\n//         this.msgsdata = data\r\n// })\r\n    // },\r\n\r\n    changeNick(){\r\n      var user_id = this.loginForm.username\r\n      console.log(user_id)\r\n      var new_nickname = this.changeNickname\r\n      console.log(new_nickname)\r\n      this.$socket.emit('changeNickname', user_id, new_nickname)\r\n      this.Nickname = new_nickname\r\n      this.showInputDialog = false\r\n    },\r\n    \r\n    getClass(msg) {\r\n      var user_id = this.loginForm.username\r\n\r\n      // console.log(msg.message_id)\r\n      if (msg.sender_id === user_id) {\r\n        console.log('right')\r\n        return 'right';\r\n      } else {\r\n        console.log('left')\r\n        return 'left';\r\n      }\r\n  },\r\n\r\n\r\n    receivemsg(friend) {\r\n      this.msgOfChat = friend.chat_id\r\n      this.chatfriend = friend;\r\n      var chat_id = this.chatfriend.chat_id\r\n      console.log(chat_id)\r\n      // CCC 定义显示的头像\r\n      this.msgAvatar = this.chatfriend.avatar\r\n      this.$socket.emit('requestMsgs', (chat_id))\r\n      this.sockets.subscribe('returnMsgs',data => {\r\n      this.msgsdata = data\r\n    })\r\n    },\r\n\r\n    // 发消息并更新消息列表\r\n    sendMsg(){\r\n      if (this.msgOfChat != -1){\r\n        var msgdata={\r\n          chat_id: this.chatfriend.chat_id,\r\n          sender_id: this.loginForm.username,\r\n          receiver_id: this.chatfriend.friend_id,\r\n          send_time: new Date().toISOString().slice(0, 19).replace('T', ' '),\r\n          message_content: this.msgtext\r\n        }\r\n        this.$socket.emit('sendMessage', (msgdata))\r\n        \r\n        var chat_id = this.chatfriend.chat_id\r\n        console.log(chat_id)\r\n\r\n        this.$socket.emit('requestMsgs', (chat_id))\r\n        \r\n        this.msgtext = ''\r\n      }\r\n      else {\r\n        alert(\"请先选择一个聊天！\")\r\n      }\r\n      \r\n  },\r\n\r\n  // 注册\r\n    submitForm(formName) {\r\n    //   var id = this.ruleForm.username\r\n    //   var password = this.ruleForm.pass\r\n        \r\n      var data ={\r\n        id: this.ruleForm.username,\r\n        password: this.ruleForm.pass\r\n      } \r\n\r\n      var checkpass = this.ruleForm.checkPass\r\n      \r\n      if(checkpass === data.password){\r\n        this.$socket.emit('signup', data)\r\n        this.sockets.subscribe('signupFail', (msg) => {\r\n          alert('注册信息不正确')\r\n        })\r\n        // 登陆成功\r\n        this.sockets.subscribe('signupSuccess', (msg)=>{\r\n          alert('请登录')\r\n        })\r\n      }\r\n      else{\r\n        alert('注册信息不正确')\r\n      }\r\n    },\r\n\r\n    handleClose(done) {\r\n        this.$confirm('确认关闭？')\r\n          .then(_ => {\r\n            done();\r\n          })\r\n          .catch(_ => {});\r\n      },\r\n\r\n    deleteEvent () {\r\n        var user_id = this.loginForm.username\r\n\r\n        this.$socket.emit('cancelAccount', user_id)\r\n\r\n        this.sockets.subscribe('cancelAccountSuccess',() => {\r\n          alert(\"注销成功\")\r\n          // 缺：用户注销后跳转界面\r\n          this.showboxchat=false\r\n          this.showboxlr=true\r\n        })\r\n      },\r\n\r\n    requestContactsEvent () {\r\n      var user_id = this.loginForm.username\r\n\r\n      this.$socket.emit('requestContacts', user_id)\r\n\r\n      this.sockets.subscribe('returnContacts',data => {\r\n        \r\n        })\r\n      },\r\n\r\n    // resetForm(formName) {\r\n    //   this.$refs[formName].resetFields();\r\n    // },\r\n    \r\n    // 打开文件选择器\r\n    openFilePicker() {\r\n      this.$refs.fileInput.click();\r\n    },\r\n\r\n    // 修改头像\r\n    changeAvatarRequest (event) {\r\n        const file = event.target.files[0];\r\n        if (!file) {\r\n          // alert(\"!file\");\r\n          return;\r\n        }\r\n        var user_id = this.loginForm.username\r\n        const reader = new FileReader();\r\n        reader.onload = () => {\r\n          const imageData = reader.result.split(',')[1]; // 去除前缀信息\r\n          this.$socket.emit('changeAvatarRequest', user_id, imageData);\r\n        };\r\n        reader.readAsDataURL(file);\r\n        // // 图片压缩\r\n        // compressImage(file, maxWidth, maxHeight, quality, function(compressedDataURL) {\r\n        //   // 在这里可以使用压缩后的DataURL，例如显示在<img>元素中\r\n        //   const imgElement = document.getElementById('compressedImg');\r\n        //   imgElement.src = compressedDataURL;\r\n\r\n        //   var user_id = this.loginForm.username\r\n        //   const reader = new FileReader();\r\n        //   reader.onload = () => {\r\n        //     const imageData = reader.result.split(',')[1]; // 去除前缀信息\r\n        //     this.$socket.emit('changeAvatarRequest', user_id, imageData);\r\n        //   };\r\n        //   reader.readAsDataURL(file);\r\n        // });\r\n        // alert(\"get it\");\r\n        \r\n\r\n        // this.$socket.emit('changeAvatarRequest', user_id, file);\r\n\r\n        // 处理返回事件\r\n        this.sockets.subscribe('changeAvatar', (newAvatar) => {\r\n          this.myAvatar = newAvatar;\r\n          \r\n        });\r\n      },\r\n      // 压缩图片函数\r\n    compressImage(file, maxWidth, maxHeight, quality, callback) {\r\n      const reader = new FileReader();\r\n      reader.onload = function(event) {\r\n        const img = new Image();\r\n        img.src = event.target.result;\r\n        img.onload = function() {\r\n          const canvas = document.createElement('canvas');\r\n          let width = img.width;\r\n          let height = img.height;\r\n\r\n          // 计算压缩后的宽度和高度\r\n          if (width > maxWidth) {\r\n            height *= maxWidth / width;\r\n            width = maxWidth;\r\n          }\r\n          if (height > maxHeight) {\r\n            width *= maxHeight / height;\r\n            height = maxHeight;\r\n          }\r\n\r\n          canvas.width = width;\r\n          canvas.height = height;\r\n          const ctx = canvas.getContext('2d');\r\n\r\n          // 在canvas上绘制压缩后的图片\r\n          ctx.drawImage(img, 0, 0, width, height);\r\n\r\n          // 将canvas上的图片转为压缩后的DataURL\r\n          const compressedDataURL = canvas.toDataURL('image/jpeg', quality / 100);\r\n\r\n          // 调用回调函数传递压缩后的DataURL\r\n          callback(compressedDataURL);\r\n        };\r\n      };\r\n      reader.readAsDataURL(file);\r\n    },\r\n\r\n    // CCC1 添加好友\r\n    addFriend(){\r\n      // alert('add')\r\n      this.$socket.emit('addFriend', \r\n      {user_id: this.loginForm.username,\r\n      friend_id: this.searchInput}\r\n      );\r\n      \r\n      this.sockets.subscribe('addFriendFail', () => {\r\n        alert(\"用户不存在！\");\r\n      });\r\n      this.sockets.subscribe('addFriendSuccess', (contact, pci) => {\r\n        this.$socket.emit('requestContacts', (this.loginForm.username))\r\n      });\r\n\r\n      this.searchInput = ''\r\n    },\r\n\r\n    // CCC2 申请好友\r\n    applyFriend(){\r\n      if (this.searchInput == this.loginForm.username){\r\n            console.log(\"不能添加自己\")\r\n            return\r\n      }\r\n      this.$socket.emit('sendAppMsg', \r\n        {\r\n          sender_id: this.loginForm.username,\r\n          receiver_id: this.searchInput,\r\n          send_time: new Date().toISOString().slice(0, 19).replace('T', ' '),\r\n          application_state: 0,\r\n        }\r\n      );\r\n      this.sockets.subscribe('applyFriendFail', () => {\r\n        alert(\"用户不存在！\");\r\n      });\r\n      this.searchInput = ''\r\n    },\r\n\r\n    // 获取申请消息另一方的用户id\r\n    getApplyUser(appmsg) {\r\n      if (appmsg.sender_id == this.loginForm.username)\r\n        return appmsg.receiver_id\r\n      else\r\n        return appmsg.sender_id\r\n    },\r\n\r\n    getApplyTime(appmsg) {\r\n      var msg_time = new Date(Date.parse(appmsg.send_time))\r\n      return `${msg_time.getFullYear()}-${msg_time.getMonth()+1}-${msg_time.getDate()}`\r\n    },\r\n\r\n    getApplyState(appmsg) {\r\n      if (appmsg.application_state == 0)\r\n        return \"待处理\"\r\n      else {\r\n        if (appmsg.application_state == -1)\r\n          return \"已拒绝\"\r\n        else \r\n          return \"已通过\"\r\n      }\r\n    },\r\n\r\n    appAccept(appmsg) {\r\n      this.$socket.emit('appAccept', appmsg.message_id, this.loginForm.username, this.getApplyUser(appmsg))\r\n      // this.$set(this.acceptedStatus, appmsg.message_id, newstatus);\r\n    },\r\n\r\n    appReject(appmsg) {\r\n      this.$socket.emit('appReject', appmsg.message_id, this.loginForm.username, this.getApplyUser(appmsg))\r\n      // this.$set(this.acceptedStatus, appmsg.message_id, newstatus);\r\n    },\r\n\r\n    // CCC1 删除好友\r\n    deleteFriend(friend) {\r\n      event.preventDefault();\r\n      const confirmed = confirm('确认删除该好友吗?这将清除所有的聊天记录！');\r\n      if (confirmed) {\r\n        // 执行删除操作\r\n        this.chatfriend = friend;\r\n        this.$socket.emit('deleteFriend', friend.chat_id,this.loginForm.username, friend.friend_id);\r\n        \r\n        this.sockets.subscribe('deleteFriendSuccess', () => {\r\n          // alert(\"删除成功！\");\r\n          this.$socket.emit('requestContacts', (this.loginForm.username))\r\n        });\r\n      } else {\r\n        // 用户点击取消，不执行删除操作\r\n      }\r\n      \r\n\r\n    },\r\n  }\r\n} \r\n  </script>\r\n  \r\n  <style lang=\"scss\" scoped>\r\n  .main-box {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    // margin: auto;\r\n    // position: relative;\r\n    position: absolute;\r\n    border-radius: 10px;\r\n    top: 42.4%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n\r\n    width: 800px;\r\n    height: 700px;\r\n    // padding: 25px;\r\n    background-color: #ecf0f3;\r\n    box-shadow: 10px 10px 10px #d1d9e6, -10px -10px 10px #f9f9f9;\r\n    border-radius: 12px;\r\n    overflow: hidden;\r\n    .container {\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      position: relative;\r\n      // margin-top: 200px;\r\n      \r\n      top: 0;\r\n      width: 800px;\r\n      height: 100%;\r\n      padding: 0px;\r\n      background-color: #ecf0f3;\r\n      // background-color: #05000b;\r\n\r\n      transition: all 1.25s;\r\n      form {\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        flex-direction: column;\r\n        width: 100%;\r\n        height: 100%;\r\n        color: #a0a5a8;\r\n        .title {\r\n          text-align: center;\r\n          font-size: 34px;\r\n          font-weight: 700;\r\n          // line-height: 3;\r\n          color: #181818;\r\n        }\r\n        .text {\r\n          margin-top: 30px;\r\n          margin-bottom: 12px;\r\n        }\r\n        .form__input {\r\n          width: 250px;\r\n          height: 40px;\r\n          margin: 4px 0;\r\n          padding-left: 25px;\r\n          font-size: 13px;\r\n          letter-spacing: 0.15px;\r\n          border: none;\r\n          outline: none;\r\n          background-color: #ecf0f3;\r\n          transition: 0.25s ease;\r\n          border-radius: 8px;\r\n          box-shadow: inset 2px 2px 4px #d1d9e6, inset -2px -2px 4px #f9f9f9;\r\n        }\r\n      }\r\n    }\r\n    .container-register {\r\n      z-index: 100;\r\n      // margin-right: 0px;\r\n    }\r\n    .container-login {\r\n      z-index: 0;\r\n      margin-left: 0px;\r\n    }\r\n    .is-hidden{\r\n      opacity: 0;\r\n    }\r\n    .is-txl {\r\n      left: 0;\r\n      transition: 1.25s;\r\n      transform-origin: right;\r\n    }\r\n    .is-z200 {\r\n      z-index: 200;\r\n      transition: 1.25s;\r\n    }\r\n    .switch {\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      position: absolute;\r\n      top: 0;\r\n      left: 0;\r\n      height: 100%;\r\n      width: 400px;\r\n      // padding: 50px;\r\n      z-index: 200;\r\n      // border-radius: 2px;\r\n      transition: 1.25s;\r\n      background-color: #0e9747;\r\n      overflow: hidden;\r\n      box-shadow: 4px 4px 10px #9a9da0, -4px -4px 10px #9a9da0;\r\n      color: #a0a5a8;\r\n      .switch__circle {\r\n        position: absolute;\r\n        width: 400px;\r\n        height: 500px;\r\n        border-radius: 50%;\r\n        background-color: #ecf0f3;\r\n        box-shadow: inset 8px 8px 12px #d1d9e6, inset -8px -8px 12px #f9f9f9;\r\n        bottom: -60%;\r\n        left: -60%;\r\n        transition: 1.25s;\r\n      }\r\n      .switch__circle_top {\r\n        top: -30%;\r\n        left: 60%;\r\n        width: 400px;\r\n        height: 300px;\r\n      }\r\n      .switch__container {\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        flex-direction: column;\r\n        position: absolute;\r\n        width: 400px;\r\n        padding: 50px 55px;\r\n        transition: 1.25s;\r\n        h2 {\r\n          font-size: 34px;\r\n          font-weight: 700;\r\n          line-height: 3;\r\n          color: #181818;\r\n        }\r\n        p {\r\n          font-size: 14px;\r\n          letter-spacing: 0.25px;\r\n          text-align: center;\r\n          line-height: 1.6;\r\n        }\r\n      }\r\n    }\r\n    .login {\r\n      left: calc(100% - 400px);\r\n      .switch__circle {\r\n        left: 0;\r\n      }\r\n    }\r\n    .primary-btn {\r\n      width: 180px;\r\n      height: 50px;\r\n      border-radius: 25px;\r\n      margin-top: 50px;\r\n      text-align: center;\r\n      line-height: 50px;\r\n      font-size: 14px;\r\n      letter-spacing: 2px;\r\n      background-color: #4b70e2;\r\n      color: #f9f9f9;\r\n      cursor: pointer;\r\n      // box-shadow: 2px 2px 4px #a9a9a9, -2px -2px 4px #a9a9a9;\r\n    }\r\n\r\n  }\r\n\r\n  .fade-enter-active,.fade-leave-active {\r\n  transition: opacity 1s;\r\n}\r\n\r\n  .fade-enter,.fade-leave-to {\r\n  opacity: 0;\r\n}\r\n  .container {\r\n  display: flex;\r\n  width: 50%;\r\n  margin: auto;\r\n  /* padding: 10px; */\r\n  height: 700px;\r\n  border-radius: 10px;\r\n  /* align-items: center; */\r\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);\r\n}\r\n.box {\r\n  /* border: 1px solid black; */\r\n  padding: 0px;\r\n  height: 700px;\r\n}\r\n.verboxleft{\r\n  background-color: #2e2e2e;\r\n  flex: 1;\r\n  border-radius: 5px;\r\n  background-image: url('./images/星空.png');\r\n  background-size: cover;\r\n}\r\n.avatar-container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin-top: 20px;\r\n}\r\n.avatar {\r\n  width: 50px;\r\n  height: 50px;\r\n  /* border-radius: 50%; */\r\n  /* background-color: #ccc; */\r\n  /* object-fit: cover; */\r\n}\r\n.userinfo-dialog .el-dialog{\r\n  border-radius: 10px;\r\n}\r\n.image-dialog {\r\n  max-width: 30%;\r\n  max-height: 30%;\r\n}\r\n.image-text {\r\n  overflow: hidden;\r\n  border-bottom:1px solid #d8d7d6;\r\n}\r\n.image-text .image-dialog {\r\n  float: left;\r\n  margin-right: 10px;\r\n}\r\n.btn-dialog{\r\n  border-top:1px solid #d8d7d6;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-grow: 1;\r\n}\r\n.btn-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n.btn{\r\n  margin-top: 20px;\r\n  /* margin-right: 10px;\r\n  margin-left: 10px; */\r\n  width: 60px;\r\n  height: 60px;\r\n  background-color: #2e2e2e;\r\n}\r\n.verboxmid{\r\n  display: flex;\r\n  flex-direction: column;\r\n  background-color: #e6e5e4;\r\n  flex: 5;\r\n}\r\n.verboxmidtop{\r\n  display: flex;\r\n  align-items: center;\r\n  background-color: #f7f7f7;\r\n  height: 50px;\r\n  border-right:1px solid #d8d7d6;\r\n  border-bottom:1px solid #d8d7d6;\r\n}\r\n.search-input {\r\n  flex: 1;\r\n  height: 20px;\r\n  padding: 5px;\r\n  border-radius: 10px;\r\n  margin-left: 5px;\r\n  margin-top: 10px;\r\n  margin-right: 3px;\r\n  /* margin-right: 10px; */\r\n  border: none;\r\n  background-color: #e2e2e2;\r\n}\r\n.verboxmidbottom{\r\n  background-color: #e6e5e4;\r\n  height: 650px;\r\n  border-top:1px solid #d8d7d6;\r\n}\r\n.scroll-content {\r\n  height: 650px;\r\n  overflow: auto;\r\n}\r\n.msg-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.right{\r\n  align-self: flex-end;\r\n}\r\n.left{\r\n  align-self: flex-start;\r\n}\r\n.message-left {\r\n  float: left;\r\n  margin-right: 10px;\r\n}\r\n.message-right {\r\n  float: right;\r\n  margin-left: 10px;\r\n}\r\n.divider {\r\n  margin-top: 10px;\r\n  border-bottom: 1px solid #ededed;\r\n  margin-bottom: 0px;\r\n}\r\n::-webkit-scrollbar {\r\n  width: 8px;\r\n}\r\n::-webkit-scrollbar-thumb {\r\n  background-color: #c4c0bf;\r\n  border-radius: 3px;\r\n}\r\n::-webkit-scrollbar-track {\r\n  background-color: #e6e5e4;\r\n}\r\n.verboxright{\r\n  background-color: #f5f5f5;\r\n  flex: 12;\r\n}\r\n.verboxrighttop{\r\n  background-color: #f5f5f5;\r\n  height: 50px;\r\n  /* box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.3); */\r\n  border-bottom:1px solid #efefef;\r\n}\r\n.verboxrightmid{\r\n  background-color: #f5f5f5;\r\n  height: 490px;\r\n  /* box-shadow: 0px 0.5px 4px rgba(0, 0, 0, 0.3); */\r\n  border-top:1px solid #efefef;\r\n  border-bottom:1px solid #efefef;\r\n  overflow: auto;\r\n}\r\n.verboxrightbottom{\r\n  display:flex;\r\n  background-color: #f5f5f5;\r\n  height: 160px;\r\n  /* box-shadow: 0px 0.5px 4px rgba(0, 0, 0, 0.3); */\r\n  border-top:1px solid #efefef;\r\n  flex-direction: column;\r\n}\r\n.btn-group {\r\n  display: flex;\r\n  /* justify-content: space-between; */\r\n  justify-content: flex-start;\r\n  margin-left: 20px;\r\n  margin-right: 20px;\r\n}\r\n/* .btn2 {\r\n  margin-right: 5px;\r\n  margin-left: 5px;\r\n} */\r\n.text-input{\r\n  flex: 1;\r\n  height: 30px;\r\n  padding: 5px;\r\n  border-radius: 5px;\r\n  /* margin: 10px; */\r\n  margin-right: 5px;\r\n  margin-left: 5px;\r\n  margin-bottom: 5px;\r\n  /* background-color: #fff; */\r\n  border:none;\r\n  background-color: #f5f5f5;\r\n}\r\ninput:focus {\r\n  // border: 2px solid blue;\r\n  outline: none;\r\n}\r\n.send-btn {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n}\r\n.btn3{\r\n  width: 20%;\r\n  height: 30px;\r\n  border: none;\r\n  border-radius: 5px;\r\n  margin-bottom: 8px;\r\n  margin-right: 25px;\r\n  background-color: #e9e9e9;\r\n}\r\n\r\n  </style>\r\n  \r\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}